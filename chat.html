<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>Community Chat</title>

  <!-- Bootstrap CSS -->
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css"
    integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">

  <!-- Font Awesome icons -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css"
    integrity="sha512-6DhfFGpA5xZHVL5S8O5f5UqaMO6/BRKzBC7N/2iGwMoyYYNjxIuN7rZzs56FzV+NpAsGcJF1T/nTnYKVYgCEw=="
    crossorigin="anonymous" referrerpolicy="no-referrer" />

  <!-- Custom CSS -->
  <style>
    #chat-container {
      height: 400px;
      overflow-y: auto;
      padding-bottom: 10px;
    }

    .chat-message {
      margin-bottom: 10px;
    }

    .chat-message .time {
      font-size: 0.8rem;
      color: #777;
    }

    .chat-message .user-name {
      font-weight: 600;
      margin-right: 10px;
    }

    .chat-message .message-body {
      font-size: 0.9rem;
      padding: 10px;
      border-radius: 10px;
    }

    .chat-message .message-body.outgoing {
      background-color: #0275d8;
      color: #fff;
      align-self: flex-end;
    }

    .chat-message .message-body.incoming {
      background-color: #eee;
      color: #444;
      align-self: flex-start;
    }

    #message-form {
      margin-top: 10px;
    }

    #message-form button {
      margin-top: 10px;
    }
  </style>

</head>

<body>
  <!-- Navigation Bar -->
  <nav class="navbar navbar-expand-lg navbar-light bg-light">
    <a class="navbar-brand" href="#">Virtual University</a>
    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse" id="navbarNav">
      <ul class="navbar-nav ml-auto">
      <li class="nav-item">
        <a class="nav-link" href="index.html">Home</a>
        </li>
      <li class="nav-item">
        <a class="nav-link" href="course.html">Courses</a>
      </li>
      <li class="nav-item">
        <a class="nav-link" href="about-us.html">about us</a>
      </li>
      <li class="nav-item">
        <a class="nav-link" href="faculity-members.html">Faculty</a>
      </li>
      <li class="nav-item">
        <a class="nav-link" href="admission.html">Admissions</a>
      </li>
      
      </ul>
    </div>
    </nav>
  <div class="container my-5">
    <div class="row">
     
      <div class="col-md-8">
        <div class="card">
          <div class="card-header">
            <h5 class="mb-0"> Community Chat</h5>
          </div>
          <div class="card-body p-0">
            <div id="chat-container">
              <div class="chat-message">
                <span class="user-name">John</span>
                <span class="time">12:30 PM</span>
                <div class="message-body incoming">Hello, everyone!</div>
              </div>
              <div class="chat-message">
                <span class="user-name">Sarah</span>
                <span class="time">12:31 PM</span>
                <div class="message-body outgoing">Hey, John!</div>
              </div>
              <div class="chat-message">
                <span class="user-name">Mary</span>
                <span class="time">12:32 PM</span>
                <div class="message-body incoming">How's it going, guys?</div>
              </div>
              <div class="chat-message">
                <span class="user-name">Tom</span>
                <span class="time">12:33 PM</span>
                <div class="message-body outgoing">Doing great, Mary. How about you?</div>
              </div>
              <div class="chat-message">
                <span class="user-name">John</span>
                <span class="time">12:34 PM</span>
                <div class="message-body incoming">I'm good, thanks for asking, Tom.</div>
              </div>
            </div>
            <form id="message-form">
              <div class="input-group">
                <input type="text" class="form-control" placeholder="Type your message here">
                <div class="input-group-append">
                  <button class="btn btn-primary" type="submit"><i class="fas fa-paper-plane"></i></button>
                </div>
              </div>
            </form>
          </div>
        </div>
      </div>
      <div class="col-md-4">
        <div class="card">
          <div class="card-header">
            <h5 class="mb-0">Online Users</h5>
          </div>
          <div class="card-body p-0">
            <ul class="list-group list-group-flush">
              <li class="list-group-item">John</li>
              <li class="list-group-item">Sarah</li>
              <li class="list-group-item">Mary</li>
              <li class="list-group-item">Tom</li>
            </ul>
          </div>
        </div>
      </div>
    </div>
  </div>

  
  <!-- jQuery -->
  <script src="https://code.jquery.com/jquery-3.5.1.min.js"
    integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj"
    crossorigin="anonymous"></script>
  
  <!-- Bootstrap JS -->
  <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"
    integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM"
    crossorigin="anonymous"></script>
  
  <!-- Firebase JS -->
  <script src="https://www.gstatic.com/firebasejs/8.3.3/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.3.3/firebase-database.js"></script>
  
  <!-- Custom JS -->
  <script>
    // Initialize Firebase
    var firebaseConfig = {
      apiKey: "YOUR_API_KEY",
      authDomain: "YOUR_AUTH_DOMAIN",
      databaseURL: "YOUR_DATABASE_URL",
      projectId: "YOUR_PROJECT_ID",
      storageBucket: "YOUR_STORAGE_BUCKET",
      messagingSenderId: "YOUR_MESSAGING_SENDER_ID",
      appId: "YOUR_APP_ID"
    };
    firebase.initializeApp(firebaseConfig);
  
    // Reference to the chat messages in the database
    var chatRef = firebase.database().ref("chat");
  
    // Reference to the chat container in the HTML
    var chatContainer = document.getElementById("chat-container");
  
    // Reference to the message input in the HTML
    var messageInput = document.getElementById("message-input");
  
    // Reference to the message form in the HTML
    var messageForm = document.getElementById("message-form");
  
    // Add an event listener to the message form
    messageForm.addEventListener("submit", function (e) {
      e.preventDefault();
  
      // Get the message from the input
      var message = messageInput.value;
  
      // Clear the input
      messageInput.value = "";
  
      // Create a new chat message
      var chatMessage = {
        message: message,
        timestamp: Date.now(),
      };
  
      // Push the chat message to the database
      chatRef.push(chatMessage);
    });
  
    // Add a listener for new chat messages
    chatRef.on("child_added", function (snapshot) {
      // Get the chat message from the snapshot
      var chatMessage = snapshot.val();
  
      // Create a new message element
      var messageElement = document.createElement("div");
      messageElement.classList.add("chat-message");
      messageElement.innerHTML = '<span class="time">' + new Date(chatMessage.timestamp).toLocaleString() + '</span>' +
        '<span class="user-name">' + chatMessage.username + ':</span>' +
        '<div class="message-body ' + (chatMessage.username === firebase.auth().currentUser.displayName ? 'outgoing">' : 'incoming">') + chatMessage.message + '</div>';

// Append the message element to the chat container
chatContainer.appendChild(messageElement);

// Scroll to the bottom of the chat container
chatContainer.scrollTop = chatContainer.scrollHeight;
});

// Add a listener for changes in authentication state
firebase.auth().onAuthStateChanged(function (user) {
if (user) {
// User is signed in
loginButton.style.display = "none";
logoutButton.style.display = "block";
messageForm.style.display = "block";
} else {
// User is signed out
loginButton.style.display = "block";
logoutButton.style.display = "none";
messageForm.style.display = "none";
}
});  